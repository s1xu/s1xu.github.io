<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>免费使用ssl证书</title>
      <link href="/2024/06/25/%E5%85%8D%E8%B4%B9%E4%BD%BF%E7%94%A8ssl%E8%AF%81%E4%B9%A6/"/>
      <url>/2024/06/25/%E5%85%8D%E8%B4%B9%E4%BD%BF%E7%94%A8ssl%E8%AF%81%E4%B9%A6/</url>
      
        <content type="html"><![CDATA[<blockquote><p>  <a href="https://letsencrypt.org/">Let’s Encrypt</a> 是一个于2015年推出的数字证书认证机构，将通过旨在消除当前手动创建和安装证书的复杂过程的自动化流程，为安全网站提供免费的SSL&#x2F;TLS证书。这是由<a href="https://letsencrypt.org/isrg/">互联网安全研究小组</a>（ISRG – Internet Security Research Group，一个公益组织）提供的服务。主要赞助商包括<a href="https://www.eff.org/">电子前哨基金会</a>，<a href="https://www.mozilla.org/foundation/">Mozilla基金会</a>，<a href="https://www.akamai.com/">Akamai</a>以及Cisco等公司。</p></blockquote><h2 id="1-安装certbot"><a href="#1-安装certbot" class="headerlink" title="1. 安装certbot"></a>1. 安装certbot</h2><p> <a href="https://certbot.eff.org/">https://certbot.eff.org</a> </p><ol><li><p>安装 EPEL 仓库（如果尚未安装）：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt install epel-release</span><br></pre></td></tr></table></figure></li><li><p>安装 Certbot 及其 Nginx 插件：</p>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install certbot python2-certbot-nginx</span><br></pre></td></tr></table></figure></li></ol><p>会列出所有的nginx服务，回车默认全选</p><blockquote><ol><li><p>证书位置：你的证书和链文件已保存在 &#x2F;etc&#x2F;letsencrypt&#x2F;live&#x2F;xxx.cn&#x2F;fullchain.pem，而私钥文件保存在 &#x2F;etc&#x2F;letsencrypt&#x2F;live&#x2F;xxx.cn&#x2F;privkey.pem。这些是配置服务器 SSL 的关键文件。</p></li><li><p>证书到期：你的证书将在 xxxx-xx-xx 到期。为了保持网站的安全，你需要在这个日期之前续期你的证书。</p></li><li><p>续期证书：未来要续期或修改证书，只需再次运行 Certbot 并使用 “certonly” 选项即可。为了简化续期过程，可以运行 certbot renew 命令以非交互方式续期所有证书</p></li></ol></blockquote><p>安装完成后nginx配置中会新增一些配置</p><p>这里建议配置 <strong>http2</strong>，这要求 Nginx 版本要大于 1.9.5。HTTP2 具有更快的 HTTPS 传输性能，非常值得开启。</p><p>需要开启HTTP&#x2F;2其实很简单，只需要在 nginx.conf 的 listen 443 ssl; 后面加上 http2 就好了。如下所示：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">listen 443 ssl http2; <span class="comment"># managed by Certbot</span></span><br><span class="line">ssl_certificate /etc/letsencrypt/live/xxx.cn/fullchain.pem; <span class="comment"># managed by Certbot</span></span><br><span class="line">ssl_certificate_key /etc/letsencrypt/live/xxx.cn/privkey.pem; <span class="comment"># managed by Certbot</span></span><br><span class="line">include /etc/letsencrypt/options-ssl-nginx.conf; <span class="comment"># managed by Certbot</span></span><br></pre></td></tr></table></figure><p>然后，重启nginx <code>nginx -s reload</code> </p><h2 id="2-配置自动更新"><a href="#2-配置自动更新" class="headerlink" title="2. 配置自动更新"></a>2. 配置自动更新</h2><p>Let’s Encrypt 的证书90天就过期了，所以，你还要设置上自动化的更新脚本，最容易的莫过于使用 crontab 了。使用 crontab -e 命令加入如下的定时作业（每个月都强制更新一下）：</p><ol><li><p>输入命令 crontab -e 打开当前用户的 crontab 文件。如果你是以 root 用户运行 Certbot（通常是这种情况），你应该以 root 用户身份运行这个命令。</p></li><li><p>设置每月自动续期：<br>如果你想每个月自动尝试更新证书，并在更新后重启 Nginx 以应用新的证书，可以添加以下两行到你的 crontab 文件中：</p></li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">0 0 1 * * /usr/bin/certbot renew --force-renewal</span><br><span class="line">5 0 1 * * /usr/sbin/service nginx restart</span><br></pre></td></tr></table></figure><h2 id="3-扩展证书"><a href="#3-扩展证书" class="headerlink" title="3. 扩展证书"></a>3. 扩展证书</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo certbot --<span class="built_in">expand</span> -d xxxx.com -d xxx.xxxx.com</span><br></pre></td></tr></table></figure><h2 id="4-创建新证书"><a href="#4-创建新证书" class="headerlink" title="4. 创建新证书"></a>4. 创建新证书</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo certbot --nginx -d xxx.xxx.com</span><br></pre></td></tr></table></figure><h2 id="5-列出所有证书"><a href="#5-列出所有证书" class="headerlink" title="5. 列出所有证书"></a>5. 列出所有证书</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo certbot certificates</span><br></pre></td></tr></table></figure><h2 id="6-删除某个证书"><a href="#6-删除某个证书" class="headerlink" title="6. 删除某个证书"></a>6. 删除某个证书</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo certbot delete --cert-name your-cert-name</span><br></pre></td></tr></table></figure><h3 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h3><ul><li><a href="https://coolshell.cn/articles/18094.html">如何免费的让网站启用HTTPS(coolshell)</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[macOS]记录我的mac设置</title>
      <link href="/2024/06/25/macOS-%E8%AE%B0%E5%BD%95%E6%88%91%E7%9A%84mac%E8%AE%BE%E7%BD%AE/"/>
      <url>/2024/06/25/macOS-%E8%AE%B0%E5%BD%95%E6%88%91%E7%9A%84mac%E8%AE%BE%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<h2 id="1-调整启动台图标数量"><a href="#1-调整启动台图标数量" class="headerlink" title="1. 调整启动台图标数量"></a>1. 调整启动台图标数量</h2><p>Mac的Launchpad启动台下会存放应用程序的图标。但在默认设置下，这些应用的图标很大，而且也比较占用屏幕空间。<br>想找一个程序最简单的当然是聚焦和Alfred，不过偶尔看着启动台很乱也很难受。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">defaults write com.apple.dock springboard-columns -int 9</span><br><span class="line"></span><br><span class="line">defaults write com.apple.dock springboard-rows -int 6</span><br><span class="line"></span><br><span class="line">defaults write com.apple.dock ResetLaunchPad -bool TRUE</span><br><span class="line"></span><br><span class="line">killall Dock</span><br></pre></td></tr></table></figure><blockquote><p>每行的含义：<br>1、调整每一行显示图标数量，9表示每一行显示9列图标，数字部分可随意设置.. 不过不建议太极端。<br>2、调整每一屏显示图标的行数，我用的是6，数字部分可随意设置，建议同上。<br>3、重置Launchpad<br>4、重启Dock</p></blockquote><p>如果手抖 多输入了几百个零 还有个恢复默认设置的方法，在终端执行以下4行命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">defaults write com.apple.dock springboard-rows Default</span><br><span class="line">defaults write com.apple.dock springboard-columns Default</span><br><span class="line">defaults write com.apple.dock ResetLaunchPad -bool TRUE</span><br><span class="line">killall Dock</span><br></pre></td></tr></table></figure><h2 id="2-恢复Dock栏默认设置"><a href="#2-恢复Dock栏默认设置" class="headerlink" title="2. 恢复Dock栏默认设置"></a>2. 恢复Dock栏默认设置</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">defaults delete com.apple.dock; killall Dock</span><br></pre></td></tr></table></figure><h2 id="3-禁用Chrome浏览器触控板手势"><a href="#3-禁用Chrome浏览器触控板手势" class="headerlink" title="3. 禁用Chrome浏览器触控板手势"></a>3. 禁用Chrome浏览器触控板手势</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">defaults write com.goolge.Chrome AppleEnableSwipeNavigateWithScrolls -bool FALSE</span><br></pre></td></tr></table></figure><h2 id="4-键盘功能键调整"><a href="#4-键盘功能键调整" class="headerlink" title="4. 键盘功能键调整"></a>4. 键盘功能键调整</h2><p>M系列以前，F5和F6是可以调节键盘灯光亮度的，但是M系列后F5、F6键盘功能区有更新，换成了搜索和录音。</p><p>平时开发中需要debug原因，所以我打开了<code>将F1、F2等键用作标准功能键</code>设置，正常使用功能区需要FN+xx键配合。某一天发现FN+F5，F6会没有功能，因为这个事儿还和客服沟通过，个人觉得这是一个设计上的缺陷。</p><p><code>Copy the configuration below to ~/Library/LaunchAgents/com.local.KeyRemapping.plist</code></p><p>在<code>~/Library/LaunchAgents/</code>目录下新增一个配置文件<code>com.local.KeyRemapping.plist</code></p><p>键入：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">plist</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//Apple//DTD PLIST 1.0//EN&quot;</span> <span class="string">&quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">plist</span> <span class="attr">version</span>=<span class="string">&quot;1.0&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dict</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">key</span>&gt;</span>Label<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>com.local.KeyRemapping<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">key</span>&gt;</span>ProgramArguments<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">string</span>&gt;</span>/usr/bin/hidutil<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">string</span>&gt;</span>property<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">string</span>&gt;</span>--set<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">string</span>&gt;</span>&#123;&quot;UserKeyMapping&quot;:[</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;HIDKeyboardModifierMappingSrc&quot;: 0xC000000CF,</span><br><span class="line">              &quot;HIDKeyboardModifierMappingDst&quot;: 0xFF00000009</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;HIDKeyboardModifierMappingSrc&quot;: 0x10000009B,</span><br><span class="line">              &quot;HIDKeyboardModifierMappingDst&quot;: 0xFF00000008</span><br><span class="line">            &#125;</span><br><span class="line">        ]&#125;<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">key</span>&gt;</span>RunAtLoad<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">true</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dict</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plist</span>&gt;</span></span><br></pre></td></tr></table></figure><p>以上是将F5、F6映射到键盘灯光调整</p><p>控制台查看已映射的功能键：</p><p><code>hidutil property --get &quot;UserKeyMapping&quot;</code> </p><blockquote><p>附：<br>常见功能的HID键值</p><table><thead><tr><th>键</th><th>媒体功能</th><th>HID键码</th></tr></thead><tbody><tr><td>F1</td><td>减低屏幕亮度</td><td>0x0C00000070</td></tr><tr><td>F2</td><td>增加屏幕亮度</td><td>0x0C0000006F</td></tr><tr><td>F3</td><td>Expose</td><td>0xFF0100000010</td></tr><tr><td>F4</td><td>Spotlight(AC Search)</td><td>0xC00000221</td></tr><tr><td>F5</td><td>Dictation</td><td>0xC000000CF</td></tr><tr><td>F6</td><td>勿扰模式(Do Not Disturb)</td><td>0x10000009B</td></tr><tr><td>F7</td><td>重播</td><td>0x0C000000B4</td></tr><tr><td>F8</td><td>播放&#x2F;暂停</td><td>0x0C000000CD</td></tr><tr><td>F9</td><td>快进</td><td>0x0C000000B3</td></tr><tr><td>F10</td><td>静音</td><td></td></tr><tr><td>F11</td><td>减小音量</td><td>0x0C000000EA</td></tr><tr><td>F12</td><td>增加音量</td><td>0x0C000000E9</td></tr><tr><td></td><td>减少键盘背光</td><td>0xFF00000009</td></tr><tr><td></td><td>增强键盘背光</td><td>0xFF00000008</td></tr><tr><td></td><td>锁屏&#x2F;屏保</td><td>0x0C0000019E</td></tr><tr><td></td><td>Launchpad</td><td>0x0C000002A2</td></tr><tr><td></td><td>Dashboard</td><td>0xFF0100000002</td></tr></tbody></table></blockquote><h2 id="5-Magic-Mouse-调整光标速度"><a href="#5-Magic-Mouse-调整光标速度" class="headerlink" title="5. Magic Mouse 调整光标速度"></a>5. Magic Mouse 调整光标速度</h2><ol><li><p>查看当前光标速度</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">defaults read -g com.apple.mouse.scaling</span><br></pre></td></tr></table></figure></li><li><p>调整速度为7.5</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">defaults write -g com.apple.mouse.scaling 7.5</span><br></pre></td></tr></table></figure></li><li><p><code>sudo reboot</code> 重启</p></li></ol><h2 id="6-设置菜单栏间距"><a href="#6-设置菜单栏间距" class="headerlink" title="6. 设置菜单栏间距"></a>6. 设置菜单栏间距</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">指定间距</span></span><br><span class="line">defaults -currentHost write -globalDomain NSStatusItemSpacing -int 10</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">指定内边距</span></span><br><span class="line">defaults -currentHost write -globalDomain NSStatusItemSelectionPadding -int 6</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">当前间距查询</span></span><br><span class="line">defaults -currentHost read -globalDomain NSStatusItemSpacing</span><br><span class="line">defaults -currentHost read -globalDomain NSStatusItemSelectionPadding</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">重置</span></span><br><span class="line">defaults -currentHost delete -globalDomain NSStatusItemSpacing</span><br><span class="line">defaults -currentHost delete -globalDomain NSStatusItemSelectionPadding</span><br></pre></td></tr></table></figure><h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><ol><li><p><a href="https://www.readern.com/keymapping-in-mac.html">Mac电脑键盘映射的最轻量方法</a></p></li><li><p><a href="https://hidutil-generator.netlify.app/">hidutil key remapping generator</a></p></li></ol>]]></content>
      
      
      <categories>
          
          <category> macOS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> macOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[macOS]设置菜单栏间距</title>
      <link href="/2024/06/23/macOS-%E8%AE%BE%E7%BD%AE%E8%8F%9C%E5%8D%95%E6%A0%8F%E9%97%B4%E8%B7%9D/"/>
      <url>/2024/06/23/macOS-%E8%AE%BE%E7%BD%AE%E8%8F%9C%E5%8D%95%E6%A0%8F%E9%97%B4%E8%B7%9D/</url>
      
        <content type="html"><![CDATA[<h2 id="为什么会想要手动修改"><a href="#为什么会想要手动修改" class="headerlink" title="为什么会想要手动修改"></a>为什么会想要手动修改</h2><p>在MacBook 14及以后的版本中，屏幕中央新增了一个刘海设计，同时右侧状态栏的间距相较之前有所增宽。这使得本已空间有限的菜单栏显得更加拥挤。</p><p>尝试过<code>Barbee</code>  <code>Bartender</code>等一些菜单栏工具，相对来说Bartender功能更加丰富，<a href="https://www.reddit.com/r/macapps/comments/1d7zjv8/bartender_5_not_safe_anymore_warning_from/">由于最近的社区讨论</a>，用着有点不放心，所以就有了以下设置：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">指定间距</span></span><br><span class="line">defaults -currentHost write -globalDomain NSStatusItemSpacing -int 10</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">指定内边距</span></span><br><span class="line">defaults -currentHost write -globalDomain NSStatusItemSelectionPadding -int 6</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">当前间距查询</span></span><br><span class="line">defaults -currentHost read -globalDomain NSStatusItemSpacing</span><br><span class="line">defaults -currentHost read -globalDomain NSStatusItemSelectionPadding</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">重置</span></span><br><span class="line">defaults -currentHost delete -globalDomain NSStatusItemSpacing</span><br><span class="line">defaults -currentHost delete -globalDomain NSStatusItemSelectionPadding</span><br></pre></td></tr></table></figure><h3 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h3><ul><li><p><a href="https://www.reddit.com/r/macapps/comments/1d8l54f/reduce_spacing_between_menubar_items/">reddit</a></p></li><li><p><a href="https://cn.v2ex.com/t/1047186#reply29">v2ex</a></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> macOS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> macOS </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
